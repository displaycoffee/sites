/* 1200 Breakpoint
========================================================================== */

@include respond(em(1200)) {
	// layout.scss
	.flex-row .flex-column {
		@include flex(grow);
		width: 33.33%;
	}

	// viewlisting.scss
	.topiclist > li dl dd {
		&.topics, &.posts, &.views {
			flex: 0 0 80px;
		}
		&.lastpost {
			flex: 0 0 180px;
		}
		&.moderation {
			flex: 0 0 300px;
		}
		&.redirect {
			flex: 0 0 340px;
		}
	}
	.styled-listing .topiclist > li.row dl[class*='forum'].has-forum-image {
		padding-left: 130px;
		min-height: 110px;
		dt .forum-image {
			@include sizing(110px, 110px);
		}
	}

	// cp.scss
	.cp-menu {
		flex: 0 0 150px;
	}
	.section-ucp-front-page .cp-main .topiclist {
		&:before {
			padding-right: 200px;
		}
		&:after {
			width: 190px;
		}
	}
	.section-ucp-manage-groups .cp-main .topiclist > li dl dd.info {
		flex: 0 0 250px;
	}

	// header.scss
	#featured-content .flex-row .flex-column {
		width: 25%;
		&.featured-title {
			min-width: 1px;
			flex: 1 1 100%;
			text-align: center;
		}
	}
}

/* 1000 Breakpoint
========================================================================== */

@include respond(em(1000)) {
	// base.scss
	pre, code {
		font-size: rem(12px);
	}

	// layout.scss
	.flex-row .flex-column {
		width: 50%;
	}
	.action-bar {
		&.bar-top .search-box {
			flex: 0 0 218px;
		}
		.pagination ul {
			display: block;
			margin-top: 2.5px;
			padding-left: 0;
		}
	}

	// viewlisting.scss
	.topiclist > li {
		dl {
			&[class*='forum'] dd.posts, &:not([class*='forum']) dd.views {
				&:before {
					content: '/';
					position: relative;
					left: -10px;
				}
			}
			dd {
				&.lastpost, &.redirect {
					flex: 0 0 200px;
				}
			}
		}
		&.header dl dd {
			&.topics, &.posts, &.views {
				display: none;
			}
		}
		&.row dl {
			&:before {
				content: '';
				flex: 1 1 100%;
				order: 1;
			}
			dt {
				order: -1;
			}
			dd {
				&.topics, &.posts, &.views {
					order: 2;
					@include flex;
					dfn {
						position: static;
					}
				}
			}
		}
	}
	.styled-listing .topiclist > li {
		dl dd {
			&.lastpost, &.redirect {
				text-align: right;
			}
		}
		&.row dl dd {
			&.topics, &.posts, &.views {
				margin-top: 5px;
			}
		}
	}

	// viewtopic.scss
	.postbody .attachbox > dd {
		width: 33.3333%;
	}
	.post .postprofile {
		flex: 0 0 176px;
	}

	// positing.scss
	#attach-panel #file-list-container table.table1 td.attach-name {
		.file-name, .attach-controls {
			width: auto;
		}
		.file-name {
			vertical-align: bottom;
		}
		.attach-controls {
			display: block;
			right: 0;
			text-align: left;
			margin-top: 5px;
		}
	}

	// cp.scss
	.cp-wrapper {
		display: block;
	}
	.cp-menu {
		margin-right: 0;
		min-height: 0;
		.navigation, .cp-mini .mini {
			margin: 0 -10px;
		}
		.navigation ul li, .cp-mini .mini dt, .cp-mini .mini dd {
			@include inline-block(baseline);
			padding: 0 10px;
		}
		.navigation ul {
			display: inline;
		}
		.cp-mini .mini {
			dt {
				width: 100%;
			}
			.pm-legend {
				padding: 0 10px 0 37px;
				.imageset {
					left: 10px;
				}
			}
		}
	}
	.section-ucp-front-page .cp-main .topiclist {
		&:before {
			padding-right: 220px;
		}
		&:after {
			width: 210px;
		}
	}

	// header.scss
	#page-welcome .user-profile {
		order: -2;
	}
}

/* 850 Breakpoint
========================================================================== */

@include respond(em(850)) {
	// form-fields.scss
	fieldset:not(.polls) dl:not(.pmlist) {
		dt {
			width: $form-field-indent1 - 100;
		}
		dd {
			margin-left: $form-field-indent1 - 100;
		}
	}

	// viewlisting.scss
	.topiclist > li {
		&.header dl {
			dt {
				max-height: 32px;
				white-space: nowrap;
				overflow: hidden;
			}
			dd.lastpost {
				font-size: 0;
			}
		}
		&.row {
			// creating a fake header for topics
			// there is no class differentiation between headers on forums and topics
			&:first-child dl:not([class*='forum']) dd.lastpost {
				position: relative;
				&:before {
					display: block;
					width: 200px;
					padding: 0 10px;
					content: 'Last Post';
					position: absolute;
					top: -51px;
					left: 0;
				}
			}
			dl[class*='forum'] dd.lastpost {
				order: 2;
				@include flex;
				margin: 5px 0 0 0;
				dfn {
					position: static;
				}
				br:first-of-type {
					display: none;
				}
			}
		}
	}
	.styled-listing .topiclist > li.row {
		&:first-child dl:not([class*='forum']) dd.lastpost:before {
			left: auto;
			right: 0;
		}
		dl[class*='forum'] dd.lastpost {
			margin-left: auto;
		}
	}

	// header.scss
	#page-header .navbar {
		.site-logo-text {
			display: block;
		}
		&.sticky {
			.site-logo-text {
				padding-right: 20px;
				margin: 0 0 10px 0;
			}
			& > ul > li .dropdown {
				top: 32px;
			}
		}
	}
}

/* 768 Breakpoint
========================================================================== */

@include respond(em(768)) {
	// form-field.scss
	fieldset:not(.polls) {
		&, &.fields1 {
			dl:not(.pmlist) {
				dt {
					width: auto;
				}
				dd {
					margin-left: 0;
				}
			}
		}
		dl:not(.pmlist) dt {
			float: none;
			margin: 0 0 5px 0;
			label {
				margin-right: 0;
			}
		}
	}

	// layout.scss
	.flex-row {
		display: block;
		.flex-column {
			width: auto;
		}
	}
	.action-bar {
		&.bar-top .search-box {
			@include flex(base);
			text-align: right;
			form {
				display: inline-block;
				max-width: 218px;
			}
		}
		.pagination {
			@include flex(full);
			@include clearfix('&');
			text-align: left;
			ul {
				float: right;
				margin-top: 0;
				padding-left: 10px;
			}
		}
	}

	// viewlisting.scss
	.topiclist {
		& > li {
			dl, &.row dl dd.mark {
				display: block;
			}
			&.header dl dt {
				max-height: none;
				white-space: normal;
				overflow: visible;
			}
			&.row dl {
				&:before {
					display: none;
				}
				&[class*='read'], &[class*='link'], &[class*='moved'] {
					padding-left: 0;
					dt {
						min-height: ($list-icon-size + 2 + 5);
						&:before {
							position: static;
							margin: 0 10px 5px 0;
							float: left;
							clear: right;
						}
					}
				}
				dd.mark:before {
					content: 'Mark: \0000A0';
					font-weight: bold;
				}
			}
		}
	}
	.simple-listing .topiclist {
		& > li {
			dl dd {
				display: none;
			}
			&.row dl {
				dt .responsive-show, dd.mark {
					margin-top: 5px;
				}
			}
			&.row dl dt {
				.responsive-hide {
					display: none !important;
				}
				.responsive-show {
					display: block !important;

				}
			}
		}
	}
	.styled-listing .topiclist {
		& > li {
			&.header dl dd, &.row dl dd.lastpost br,
			&.row:first-child dl:not([class*='forum']) dd.lastpost:before {
				display: none;
			}
			&.row dl {
				dd.redirect, &:not([class*='forum']) dd.lastpost {
					margin-top: 5px;
				}
				dd {
					&.lastpost, &.redirect {
						text-align: left;
					}
					&.topics, &.posts, &.views {
						@include inline-block(baseline);
					}
				}
				&[class*='forum'].has-forum-image {
					padding-left: 0;
					min-height: 0;
					dt {
						padding-top: 80px;
						.forum-image, .forumtitle {
							top: -20px;
							left: -10px;
							right: -10px;
						}
						.forum-image {
							@include sizing(auto, 80px);
							border-radius: 0;
							border: 0;
							img {
								width: 100%;
								margin-top: -25%;
							}
						}
						.forumtitle {
							height: 40px;
							line-height: 40px;
							position: absolute;
							margin-top: 40px;
							padding: 0 20px;
							background: rgba($color-02, 0.5);
							color: $color-01;
							@include spectral-common;
							font-size: rem(20px);
							font-weight: normal;
							overflow: hidden;
							text-overflow: ellipsis;
							white-space: nowrap;
							& + br {
								display: none;
							}
						}
					}
					&[class*='read'], &[class*='link'], &[class*='moved'] {
						dt {
							&:before {
								position: absolute;
							}
							.forumtitle {
								padding-left: 80px;
							}
						}
					}
				}
				&:not([class*='forum']) dd.lastpost dfn {
					position: static;
				}
			}
		}
	}
	table.table1 {
		&, thead, tbody, tr, th, td {
			display: block;
		}
		thead {
			display: none;
		}
		tbody tr {
			padding: 20px;
		}
		td {
			padding: 0;
			margin-top: 5px;
			&:first-child {
				padding-left: 0;
				margin-top: 0;
			}
			&:last-child {
				padding-right: 0;
			}
			&.posts, &.mark, &.active, &.joined, &.reportby, &.info {
				width: auto;
			}
			&[style*='width'] {
				width: auto !important;
			}
			&.empty, strong + br {
				display: none;
			}
			dfn {
				position: static;
				display: inline-block !important;
				font-weight: bold;
				&:after {
					content: ': \0000A0';
				}
			}
		}
		.rank-img {
			float: none;
			text-align: left;
			padding-right: 5px;
		}
		&.show-header {
			thead {
				&, th:first-child {
					display: block;
				}
				th {
					&, &:first-child .rank-img {
						display: none;
					}
				}
			}
		}
	}

	// viewtopic.scss
	.post {
		 .inner {
			 display: block;
			 position: relative;
		 }
		 .postprofile {
			 margin: 0 0 20px 0;
			 padding: 0 0 20px 0;
		 }
	}
	.postbody {
		position: static;
		.post-buttons {
			top: 20px;
			right: 20px;
			max-width: 20%;
		}
	}
	.postbody > div > h3, .postbody > h3,
	.section-viewtopic .post .postbody > div > h3 {
		padding-right: 0;
	}
	.postprofile {
		border-right: 0;
		border-bottom: 1px dashed $color-04;
		@include clearfix('&');
		dt, dd.profile-rank {
			text-align: left;
		}
		dt {
			margin-bottom: 0;
			a[class*='username'] {
				padding-right: 50px;
			}
			&.has-avatar {
				.avatar-container {
					float: left;
					width: 130px;
					margin-right: 20px;
				}
				& ~ dd {
					margin-left: 150px;
				}
			}
		}
		dd.profile-rank {
			margin: 0 0 3px 0;
			font-size: rem(16px);
		}
	}

	// posting.scss
	#attach-panel #file-list-container table.table1 {
		border-top: 1px dashed $color-04;
		td.attach-status .file-status:before {
			font-size: rem(14px);
		}
	}

	// cp.scss
	.cp-main table.table1 {
		border-top: 1px dashed $color-04;
	}
	.section-ucp-front-page .cp-main .topiclist {
		&:before {
			padding-right: 20px;
		}
		&:after {
			display: none;
		}
	}
	.section-mcp-warnings .cp-main table.table1 td a[href*='user_notes'] {
		position: relative;
		left: -10px;
		z-index: 2;
		background: $color-05;
	}
	.mcp-main #mcp_queue {
		& ~ .panel table.table1 {
			th, td {
				&:first-child {
					width: auto;
				}
			}
		}
		.topiclist > li.header dl:after {
			display: none;
		}
	}

	// header.scss
	.mobile-open {
		position: relative;
		overflow: hidden;
	}
	.mobile-menu-button {
		@include inline-block(middle);
	}
	#mobile-menu {
		display: block;
	}
	#page-header {
		.headerbar .header-content {
			.site-description, .header-divider, .site-quotes {
				min-width: 1px;
				flex: 1 1 100%;
			}
			.site-description, .site-quotes, .site-quotes .quote-author {
				text-align: center;
			}
			.site-description, .site-quotes {
				max-width: 90%;
			}
			.site-description {
				h1 {
					font-size: rem(60px);
					margin-bottom: 10px;
				}
				h3 {
					font-size: rem(24px);
				}
			}
			.header-divider {
				height: 1px;
				margin: 20px 0;
				&:before {
					width: 50%;
					margin: 0 auto;
				}
			}
		}
		.navbar {
			.site-logo-text {
				display: inline-block;
			}
			&.sticky .site-logo-text {
				margin-bottom: 0;
			}
		}
	}
	#page-welcome {
		.user-buttons {
			position: relative;
			& > li {
				&.dropdown-container {
					position: static;
				}
				&.toggle {
					display: block;
				}
				& > a {
					padding: 5px 10px;
					.icon {
						font-size: rem(12px);
					}
				}
			}
		}
		.user-profile {
			.user-avatar {
				width: 125px;
			}
			h5 {
				font-size: rem(35px);
			}
		}
		.user-information > p:first-child {
			text-align: center;
		}
		.site-callouts {
			.introduction, .site-links {
				display: none;
			}
			.site-links.toggle-show {
				display: block;
			}
			.flex-row {
				display: flex;
				.flex-column {
					width: 50%;
				}
			}
		}
	}
	#notification_list {
		width: auto !important;
		min-width: 0;
		top: 35px;
		left: 2.5px;
		right: 2.5px;
	}
	#featured-content {
		display: none;
		&.toggle-show {
			display: block;
		}
		.flex-row {
			display: flex;
			.flex-column {
				width: 50%;
				.image-wrap {
					padding-bottom: 30%;
				}
			}
		}
	}
}

/* 600 Breakpoint
========================================================================== */

@include respond(em(600)) {
	// base.scss
	blockquote {
		max-width: none;
		padding-left: 20px;
	}

	// layout.scss
	#nav-breadcrumbs ul li.home a {
		.icon {
			margin-right: 0;
		}
		span {
			display: none;
		}
	}
	.action-bar {
		&, &.bar-top .search-box form {
			display: block;
		}
		&.bar-top .search-box form {
			max-width: none;
		}
	}

	// viewtopics.scss
	.postbody {
		.content, .signature {
			blockquote cite {
				padding-right: 0;
				.responsive-hide {
					position: static;
					margin: 3px 0 0 0;
				}
			}
		}
		.attachbox > dd {
			width: 50%;
		}
		.post-notice {
			&.unapproved, &.deleted {
				position: relative;
				strong {
					display: block;
				}
				.button2 {
					margin-left: 0;
				}
			}
			&.unapproved {
				span {
					float: left;
				}
				span + strong {
					margin: 0 0 5px 0;
					clear: right;
				}
			}
		}
	}
	.topic_poll .panel .content fieldset.polls {
		border-top: 1px dashed $color-04;
		padding-top: 10px;
		position: relative;
		dl {
			margin-bottom: 10px;
			&:after {
				border-bottom: 1px dashed $color-04;
				display: block;
				height: 1px;
				margin: 0 10px;
				padding: 10px 0 0 0;
			}
			&:last-child:after {
				height: 0;
				border-bottom: 0;
				padding-top: 0;
				margin: 0;
			}
			dt {
				float: none;
				width: auto;
				margin-bottom: 3px;
				padding-right: 80px;
			}
			.poll_option_select {
				left: auto;
				right: 0;
				&:before {
					content: 'Vote: \0000A0';
				}
				& + .resultbar {
					padding-left: 10px;
				}
			}
			.resultbar {
				width: 70%;
			}
			.poll_option_percent {
				width: 30%;
				text-align: right;
			}
			&.poll_total_votes, &.poll_vote, &.poll_view_results {
				dt {
					display: none;
				}
			}
			&.poll_vote, &.poll_view_results {
				.resultbar {
					float: none;
					width: auto;
					text-align: right;
				}
			}
		}
	}
	.postprofile {
		dt.has-avatar {
			.avatar-container {
				width: 80px;
			}
			& ~ dd {
				margin-left: 100px;
			}
		}
		dd {
			display: none;
			&.profile-rank, &.profile-posts, &.profile-joined, &.profile-contact {
				display: block;
			}
		}
	}
	.post.online .postprofile dt.has-avatar .avatar-container {
		margin-top: 40px;
	}

	// header.scss
	#featured-content .flex-row .flex-column .image-wrap {
		padding-bottom: 0;
		height: 75px;
	}
}

/* 450 Breakpoint
========================================================================== */

@include respond(em(450)) {
	// form-fields.scss
	.button, .button1, .button2 {
		display: block;
	}
	input.button, input.button1, input.button2 {
		width: 100%;
	}
	fieldset.submit-buttons {
		font-size: 0;
		& > strong {
			display: block;
		}
		& > * {
			font-size: rem(14px);
		}
	}

	// layout.scss
	.forabg, .forumbg, .post, .panel {
		border-width: 10px;
	}
	.action-bar {
		@include clearfix('&');
		.topic-tools + .search-box {
			float: right;
			width: 100%;
			margin-top: -40px;
			padding-left: 110px;
		}
		.pagination ul {
			float: none;
			margin-top: 5px;
			padding-left: 0;
		}
	}

	// viewlisting.scss
	$responsive-icon-size: $list-icon-size - 8px;
	.topiclist > li.row dl {
		dt .row-item-link {
			@include sizing($responsive-icon-size + 2, $responsive-icon-size + 2);
		}
		&[class*='read'], &[class*='link'], &[class*='moved'] {
			dt {
				min-height: ($responsive-icon-size + 2 + 5);
				&:before {
					@include sizing($responsive-icon-size, $responsive-icon-size);
					line-height: $responsive-icon-size;
					font-size: rem(16px);
				}
			}
		}
	}
	.styled-listing .topiclist > li.row dl[class*='forum'].has-forum-image {
		dt .row-item-link, &[class*='read'] dt:before, &[class*='link'] dt:before,
		&[class*='moved'] dt:before, &[class*='mine'] dt:after {
			top: 5px;
		}
		&[class*='read'], &[class*='link'], &[class*='moved'] {
			dt .forumtitle {
				padding-left: 62px;
			}
		}
	}

	// viewtopic.scss
	.postbody {
		.inline-attachment, .attachbox {
			.file .attach-image .image-open {
				left: 0;
				right: 0;
				top: auto;
				bottom: 10px;
				@include sizing(20px, 20px);
				margin: auto;
			}
		}
		.attachbox {
			display: block;
			& > dd {
				width: auto;
			}
		}
	}
	.postprofile dd.profile-contact {
		position: relative;
		.dropdown-container {
			position: static;
			.dropdown {
				left: -100px;
				right: 0;
			}
		}
	}
	.topic_poll .panel .content fieldset.polls dl {
		dt {
			padding-right: 0;
		}
		.poll_option_select {
			position: static;
		}
	}

	// cp.scss
	.cp-main {
		.panel, .post.pm, .topicreview {
			padding: 20px 10px 0 10px;
		}
	}

	// header.scss
	#page-welcome .site-callouts, #featured-content {
		.flex-row {
			display: block;
			.flex-column {
				width: auto;
			}
		}
	}
	#notification_list {
		.header {
			padding-right: 50px;
			.header_settings a {
				font-size: 0;
				&:before {
					@include font-awesome;
					content: unicode($icon-cogs);
					font-size: rem(14px);
				}
			}
		}
		ul li {
			.notification-block {
				img {
					display: none;
				}
				.notification_text {
					margin-left: 0;
					.notification-title {
						padding-right: 20px;
					}
					.notification-time {
						text-align: left;
					}
				}
			}
			.icon-mark .icon {
				font-size: rem(14px);
			}
		}
	}
}

/* 397 Breakpoint
========================================================================== */

@include respond(em(397)) {
	// viewtopics.scss
	.topic_poll .panel .content fieldset.polls dl {
		.resultbar, .poll_option_percent {
			float: none;
			width: auto;
		}
		.resultbar {
			margin-bottom: 3px;
		}
		.poll_option_percent {
			text-align: left;
			&:before {
				content: 'Count: \0000A0';
			}
		}
	}
	.postprofile {
		dt, dd, dd.profile-rank {
			text-align: center;
		}
		dt a[class*='username'] {
			padding-right: 0;
		}
		dt.has-avatar {
			.avatar-container {
				float: none;
				margin-right: 0;
			}
			& ~ dd {
				margin-left: 0;
			}
		}
		dd {
			&.profile-posts, &.profile-joined {
				display: none;
			}
			&.profile-contact .dropdown-container .dropdown {
				left: 0;
			}
		}
	}
	.post.online .postprofile dt.has-avatar .avatar-container {
		margin-top: 0;
	}

	// header.scss
	#notification_list {
		top: 70px;
	}
}
