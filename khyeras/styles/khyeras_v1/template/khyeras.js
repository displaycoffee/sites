function cleanHTML(e){return e.replace(/(<([^>]+)>)/gi,"")}function debounce(e,a,t){var r;return function(){var n=this,i=arguments,o=function(){r=null,t||e.apply(n,i)},s=t&&!r;clearTimeout(r),r=setTimeout(o,a),s&&e.apply(n,i)}}function findParent(e,a){for(;e;){if(e.classList&&e.classList.contains(a))return e;e=e.parentNode}return null}function isMobile(e){var a=window.innerWidth/khy.variables.fontSize,t=document.documentElement.clientWidth/khy.variables.fontSize,r=document.body.clientWidth/khy.variables.fontSize;return e>=(a||t||r)}function mergeArray(e,a){for(var t=e.concat(a),r=0;r<t.length;++r)for(var n=r+1;n<t.length;++n)t[r]===t[n]&&t.splice(n--,1);return t}function addFieldsetClasses(){var e="fieldset:not(.polls) dl:not(.pmlist) dd",a=document.querySelectorAll(e),t=document.querySelectorAll(e+' input[type="radio"]');if(a&&a.length)for(var r=0;r<a.length;r++){var n=a[r];n.children.length>1&&n.classList.add("has-multiple-fields"),-1!==n.innerHTML.indexOf("&nbsp;")&&n.classList.add("has-space")}if(t&&t.length)for(var r=0;r<t.length;r++){var i=t[r];i.parentNode.classList.add("has-radio-button")}}function addForumImageClass(){var e=document.querySelectorAll(".list-inner .forum-image");if(e&&e.length)for(var a=0;a<e.length;a++){var t=e[a],r=findParent(t,"row-item");r.classList.add("has-forum-image")}}function addImageBackground(e,a){var t=document.querySelectorAll(e);if(t&&t.length)for(var r=0;r<t.length;r++){var n=t[r],i=n.getAttribute("src"),o="image-fit-default",s=n.parentNode;if(a){var l=i.match(/(\d+x\d+)/g),c=i.match(/.(jpg|jpeg|gif|png)/g);l?i=i.replace(l,a):c&&(i=i.replace(c,"-"+a+c)),o="image-fit-responsive"}s.style.backgroundImage="url("+i+")",s.classList.add("image-fit"),s.classList.add(o)}}function addImageWrapper(e){var a=document.querySelectorAll(e);if(a&&a.length)for(var t=0;t<a.length;t++){var r=a[t],n=document.createElement("div");n.setAttribute("class","image-wrap"),r.parentNode.insertBefore(n,r),n.appendChild(r)}}function addNoPaginationClass(){var e=document.querySelector(".action-bar .pagination");if(e){var a=e.innerText.toLowerCase(),t="page 1 of 1";if(-1!==a.indexOf(t)){var r=new RegExp(t,"gi"),n=a.replace(r,"").match(/\d+/g);n&&0>=n&&khy.selectors.body.classList.add("no-pagination")}}}function addQuickLinks(){var e=document.querySelectorAll("[data-quick-name]");if(e&&e.length){var a=document.querySelector(".page-body > .wrapper > .panel"),t=document.querySelector(".page-body > .wrapper .tabs"),r=document.createElement("p");r.setAttribute("class","quick-links");var n=document.createElement("strong");n.textContent="Quick Links:",r.appendChild(n),t?t.parentNode.insertBefore(r,t):a.parentNode.insertBefore(r,a);for(var i=0;i<e.length;i++){var o=e[i],s=document.createElement("a");if(s.setAttribute("href","#"+o.getAttribute("id")),s.textContent=o.getAttribute("data-quick-name"),r.appendChild(s),i!=e.length-1){var l=document.createElement("span");l.setAttribute("class","quick-links-separator"),l.textContent="|",r.appendChild(l)}}}}function addSearchIgnoredClass(){var e=document.querySelectorAll(".search.post .postbody");if(e&&e.length)for(var a=0;a<e.length;a++){var t=e[a];-1!==t.innerHTML.indexOf("ignore list")&&t.classList.add("ignore")}}function addThanksClass(){var e=document.querySelectorAll("#viewprofile .extra-details h3");if(e&&e.length)for(var a=0;a<e.length;a++){var t=e[a];if(-1!==t.innerHTML.indexOf("Thanks list")){var r=findParent(t,"panel");r.classList.add("member-thanks-list")}}}function bannerCodeGenerator(e,a){function t(e,a,t){var i=e.target||e.srcElement,o="//"+window.location.hostname+"/"+i.getAttribute("src").replace("./","");r.innerHTML=n.replace(a,o).replace(t,i.getAttribute("alt"))}var r=document.querySelector(a);if(r)for(var n=r.innerHTML,i=n.match(/src=\"(.*?)\"/)[1],o=n.match(/alt=\"(.*?)\"/)[1],s=document.querySelectorAll(e),l=0;l<s.length;l++)s[l].onclick=function(e){t(e,i,o)}}function checkForEmpty(e,a){var t=document.querySelectorAll(e);if(t&&t.length)for(var r=0;r<t.length;r++){var n=t[r],i=n.innerHTML.replace(/\s+|\n|\r/g,"").length;0>=i&&(a?n.parentNode.style.display="none":n.style.display="none")}}function checkForNewPM(){var e=document.querySelectorAll('.cp-menu ul li a[href*="folder"]');if(e&&e.length)for(var a=0;a<e.length;a++){var t=e[a];-1!==t.innerHTML.indexOf("strong")&&t.classList.add("new-pm")}}function detectiPhone(){navigator.userAgent.match(/iPhone|iPad|iPod/i)&&khy.selectors.body.classList.add("ios")}function moveRankText(){var e=document.querySelectorAll("table.table1 .rank-img");if(e&&e.length)for(var a=0;a<e.length;a++){var t=e[a];t.parentNode.appendChild(t),"TD"!=t.parentNode.nodeName&&"td"!=t.parentNode.nodeName||t.parentNode.classList.add("name")}}function noContentListing(){var e=["This board has no forums.","You do not have the required permissions to view or read topics within this forum.","There are no topics or posts in this forum.","This category has no forums.","No suitable matches were found."],a=document.querySelectorAll(".action-bar + .panel");if(a&&a.length)for(var t=0;t<a.length;t++){var r=a[t];-1!==e.indexOf(r.innerText.trim())&&r.classList.add("no-content")}}function toggleElements(e,a,t,r){function n(e,a){return e=e+" - "+a,e.toLowerCase().replace(/\'/,"").replace(/[^a-z0-9]+/g,"-").replace(/-+/,"-")}function i(e,r,n){var i="true"==n?"-mobile":"",s=findParent(r,t).querySelector(a),l={"con-col":"toggle-content-collapsed"+i,"con-exp":"toggle-content-expanded"+i,"btn-col":"toggle-button-collapsed","btn-exp":"toggle-button-expanded"};e?(o(r,l["btn-col"],l["btn-exp"]),o(s,l["con-col"],l["con-exp"])):(o(r,l["btn-exp"],l["btn-col"]),o(s,l["con-exp"],l["con-col"]))}function o(e,a,t){e.classList.remove(a),e.classList.add(t)}function s(e){return"undefined"!=typeof Storage&&r?window.localStorage.setItem(c,JSON.stringify(e)):null}var l=document.querySelectorAll(e),c="khy-toggles";if("undefined"!=typeof Storage&&localStorage.getItem(c)&&r)var d=JSON.parse(localStorage.getItem(c));else var d={};if(l&&l.length){var u=l[0].getAttribute(khy.attr.toggleType);d.hasOwnProperty(u)||(d[u]={});for(var p=0;p<l.length;p++){var e=l[p],h=e.getAttribute(khy.attr.toggleId);"9999"==h&&(h=2*(p+1),e.setAttribute(khy.attr.toggleId,h));var f=n(e.getAttribute(khy.attr.toggleName),h);if(d[u].hasOwnProperty(f))d[u][f]=d[u][f];else{var g="true"==e.getAttribute(khy.attr.toggleState);d[u][f]=g}e.parentNode.classList.add("has-toggle-button"),i(d[u][f],e,e.getAttribute(khy.attr.toggleMobile)),e.onclick=function(){return function(e){f=n(this.getAttribute(khy.attr.toggleName),this.getAttribute(khy.attr.toggleId)),d[u][f]=!d[u][f],s(d),i(d[u][f],this,this.getAttribute(khy.attr.toggleMobile))}}()}s(d)}}function addFiltering(){function e(e){cardBlocks.filter(function(a){-1!==a.filters.indexOf(e)&&(a.applied+=1);var t=document.querySelector(a.id);t.classList.contains(s)||(-1!==a.filters.indexOf(e)?(t.classList.contains(l)&&t.classList.remove(l),t.classList.add(s)):t.classList.add(l))})}function a(e){cardBlocks.filter(function(a){if(-1!==a.filters.indexOf(e)&&(a.applied-=1),i.length>0){var t=document.querySelector(a.id);t.classList.contains(l)||-1!==a.filters.indexOf(e)&&a.applied<1&&(t.classList.contains(s)&&t.classList.remove(s),t.classList.add(l))}}),i.length<=0&&t()}function t(){i=[],window.history.pushState({},"","?");for(var e=0;e<n.length;e++)n[e].classList.remove(o);cardBlocks.filter(function(e){e.applied>0&&(e.applied=0);var a=document.querySelector(e.id);a.classList.remove(s),a.classList.remove(l)}),r(!1)}function r(e){e?c[0].removeAttribute("disabled"):c[0].setAttribute("disabled","")}var n=document.querySelectorAll(".card-filters .card-filter-menu .card-filter"),i=[],o="card-filter-active",s="toggle-show",l="toggle-hide",c=document.querySelectorAll(".card-filter-reset");if(n&&n.length&&"undefined"!=typeof cardBlocks){if(window.location.search){i=window.location.search.replace("?","").split("&");for(var d=0;d<i.length;d++){var u=i[d].split("="),p=document.querySelector("#card-filter-"+u[0]+"-"+u[1]);p&&(p.classList.add(o),e(u[0]+"="+u[1]))}}else r(!1);c&&c.length&&(c[0].onclick=function(){t()});for(var h=0;h<n.length;h++){var f=n[h];f.onclick=function(t){window.location.search||r(!0);var n=t.target||t.srcElement,s=n.getAttribute("data-field"),l=n.getAttribute("data-filter"),c=s+"="+l;-1!==i.indexOf(c)?(i.splice(i.indexOf(c),1),n.classList.remove(o),a(c)):(i.push(c),n.classList.add(o),e(c)),window.history.pushState({},"","?"+i.join("&"))}}}}function checkForSpace(e){var a=jQuery(e);a&&a.length&&a.each(function(){var e=jQuery(this);"&nbsp;"==e.html()||"<label>&nbsp;</label>"==e.html()?e.addClass("empty-space"):e.removeClass("empty-space")})}function addScrollableArea(e,a,t){(e&&e.length||t&&t.length)&&(e[0].scrollHeight>a?(e.addClass("scrollable"),e.wrapInner('<div class="scrollable-wrapper"></div>')):t.hide())}function addAttachmentIcon(){var e=jQuery(".attach-image");e&&e.length&&e.each(function(){jQuery(this).prepend('<span class="image-open" onclick="viewableArea(this);"><i class="icon icon-xl fa-search-plus fa-fw" aria-hidden="true"></i></span>')})}function updateaAttachmentDisplay(e){var a=jQuery(e);a&&a.length&&a.on("click",function(e){var a=jQuery(this).closest(".file").parent();a.hasClass("image-expanded")?a.removeClass("image-expanded"):a.addClass("image-expanded")})}function formatDisplayActions(){var e=jQuery(".display-actions");e&&e.length&&e.each(function(){var e=jQuery(this);e.html(e.html().replace(/&nbsp;/g,"").replace(/::/g,"&bull;"));var a=e.find(" div a");-1!==a.text().toLowerCase().indexOf("mark")&&a.parent("div").addClass("mark-actions");var t=e.children("select");t.each(function(){jQuery(this).next(".button1, .button2").addBack().wrapAll('<div class="select-actions"></div>')}),e.wrapInner('<div class="display-actions-wrapper"></div>')})}function hidePMPostBox(){var e=jQuery("#pmheader-postingbox");e&&e.length&&0==e.find("fieldset.fields1").children().length&&e.hide()}function addCPWrapper(){var e=jQuery(".cp-menu"),a=jQuery(".cp-main");(e&&e.length||a&&a.length)&&(e.parent().addClass("cp-wrapper"),a.parent().addClass("cp-wrapper"))}function toggleMemberDisplay(){var e=jQuery(".profile-tabs");if(e&&e.length){var a=e.find("ul li a[data-tabname]");a.on("click",function(){var e=jQuery(this);a.parent().removeClass(khy.attr.activeTab),e.parent().addClass(khy.attr.activeTab);var t=e.attr("data-tabname");jQuery(".tab-panel").each(function(){var e=jQuery(this);e.hasClass(t)?e.addClass(khy.attr.showPanel).removeClass(khy.attr.hidePanel):e.addClass(khy.attr.hidePanel).removeClass(khy.attr.showPanel)})})}}function toggleMapDisplay(){var e=jQuery(".map-tabs");if(e&&e.length){var a=e.find("ul li a[data-tabname]");a.on("click",function(){var e=jQuery(this),a=e.attr("data-tabname");e.parent().hasClass(khy.attr.activeTab)?e.parent().removeClass(khy.attr.activeTab):(a==khy.attr.perimeters?jQuery('.map-tabs .tab a[data-tabname="'+khy.attr.layouts+'"]').parent().removeClass(khy.attr.activeTab):a==khy.attr.layouts&&jQuery('.map-tabs .tab a[data-tabname="'+khy.attr.perimeters+'"]').parent().removeClass(khy.attr.activeTab),e.parent().addClass(khy.attr.activeTab));var t=jQuery(".map ."+a);t.hasClass(khy.attr.hidePanel)?(a==khy.attr.perimeters?jQuery(".map ."+khy.attr.layouts).removeClass(khy.attr.showPanel).addClass(khy.attr.hidePanel):a==khy.attr.layouts&&jQuery(".map ."+khy.attr.perimeters).removeClass(khy.attr.showPanel).addClass(khy.attr.hidePanel),t.addClass(khy.attr.showPanel).removeClass(khy.attr.hidePanel)):t.addClass(khy.attr.hidePanel).removeClass(khy.attr.showPanel)})}}function addOnScroll(e,a,t){var r=jQuery(window);if(r&&r.length){var a=jQuery(a).offset().top,n=!1;r.scroll(function(){0==n?r.scrollTop()>a&&(jQuery(e).addClass(t),n=!0):r.scrollTop()<=a&&(jQuery(e).removeClass(t),n=!1)})}}function scrollOnPage(e,a,t){var r=jQuery(e);r&&r.length&&(addOnScroll(".scroll-to-links",".site-description","scroll-to-visible"),r.on("click",function(){return jQuery("html, body").animate({scrollTop:t},1e3),!1}))}function initializeDiscordList(){var e=jQuery(".discord-channel-status .discord-channel-list"),a="<li>There's no one online right now. :( Check back later.</li>",t=jQuery.ajax({type:"GET",url:"//discordapp.com/api/guilds/482924002411806732/widget.json",dataType:"json"});t.done(function(t){var r=t.members||!1,n=["memoria"],i=["algaliarept"];if(r&&r.length>0){r=r.filter(function(e){e.rank=3,e.group="user";var a=e.username.toLowerCase();return i.indexOf(a)>-1?(e.rank=2,e.group="moderator"):n.indexOf(a)>-1&&(e.rank=1,e.group="admin"),e}),r.sort(function(e,a){return e.rank-a.rank});for(var o=r.length,s=12,l=o>s?s:o,c=0;l>c;c++){var d=r[c],u="//khyeras.org/styles/khyeras_v1/theme/images/no_avatar.gif";d.avatar_url&&(u=d.avatar_url.replace(/^http(s?):/i,""));var p="Discord Avatar - "+d.username,h='<span class="discord-avatar image-wrap"><img src="'+u+'" class="user-avatar" alt="'+p+'" title="'+p+'" /></span>',f='<span class="discord-username">'+d.username+"</span>",g='<li class="discord-'+d.group+" discord-status-"+d.status+'">'+h+f+"</li>";e.append(g)}o>s&&e.append('<li class="discord-more-users"><a href="//discord.gg/MXtzbmw" target="_blank">...more users online</a></li>')}else e.append(a)}),t.fail(function(){e.append(a)})}function initializeDropdownMenu(e,a){var t="dropdown-visible",r="dropdown-not-visible",e=jQuery(e),n=jQuery(a);e.off().on("click",function(){var e=jQuery(this).closest(a);e.hasClass(t)?(n.removeClass(r),e.removeClass(t)):(n.removeClass(t).addClass(r),e.removeClass(r).addClass(t))}),e&&e.length&&jQuery(document).off().on("click",function(e){jQuery(e.target).closest(a).length||n.removeClass(t).removeClass(r)})}function initializeMobileMenu(e){function a(){o.hasClass("show")?(o.removeClass("show"),jQuery("body, html").removeClass("mobile-open")):(o.addClass("show"),jQuery("body, html").addClass("mobile-open"))}function t(){var e=isMobile(c/khy.variables.fontSize);e?d||(jQuery(".mobile-menu-header .fa-close").off().on("click",function(){a()}),r.detach().appendTo(s),d=!0):d&&(r.detach().appendTo(n),jQuery("body, html").removeClass("mobile-open"),o.removeClass("show"),d=!1)}var r=jQuery(e.menu),n=jQuery(e.menuContainer),i=jQuery(e.mobileButton),o=jQuery(e.mobileMenu),s=jQuery(e.mobileContent),l=jQuery(e.mobileOverlay),c=e.width,d=!1;i.off().on("click",function(){a()}),l.off().on("click",function(){a()}),t();var u=debounce(function(){t()},100);window.addEventListener("resize",u)}function updateProfileFields(){function e(){D.each(function(){m=jQuery(this),"ucp"==g?(O.prop("disabled",!0),m.prop("disabled",!0)):m.is("select")?c(m,!1):m.is('input[type="checkbox"]')?u(m,!1):m.val("").prop("disabled",!0)})}function a(e){var a=jQuery(".error-msg-chracter, .character-fields");e?a.addClass(I):a.removeClass(I)}function t(){C=d(R),y=F.find('input[type="checkbox"]:checked'),k=f("#pf_c_race_opts_1"),C==A||C==L?E.each(function(){if(m=jQuery(this),C==L&&1==k){w=h(y);var e=mergeArray(characterRules[w].exRace,nonHalf);e&&p(e,h(m),m),i()}else C==A&&1==k||C==L&&2==k?(m.is(":checked")||u(m,!1),c(N,!0)):(C==A?u(m,!0):C==L&&p(nonHalf,h(m),m),i())}):(u(E,!1),c(N,!1)),"Writer"==accType&&"ucp"==g&&N.prop("disabled",!0)}function r(e){var a=[];return E.each(function(){if(m=jQuery(this),v=h(m),"Kerasoka"==v&&(J=m),m.is(":checked")){var t=characterRules[v].exClass;t&&(a=e!=L||"Dwarf"!=v||J.is(":checked")?mergeArray(a,t):dragonClasses)}}),a}function n(){C=d(R),j=d(N);var e=r(C);y=H.find('input[type="checkbox"]:checked'),x=f("#pf_c_class_opts_1"),j==P||j==T?B.each(function(){m=jQuery(this),j==P&&1==x||j==T&&2==x?m.is(":checked")||u(m,!1):j!=S&&p(e,h(m),m)}):u(B,!1)}function i(){c(N,!1),u(B,!1)}function o(){Q=d(z),y=K.find('input[type="checkbox"]:checked'),_=f("#pf_c_religion_opts_1"),Q==q||Q==M?W.each(function(){m=jQuery(this),_>3?m.is(":checked")||u(m,!1):Q!=S&&religionRules[Q]?p(religionRules[Q],h(m),m,"include"):u(m,!1)}):u(W,!1)}function s(e,a){var t;e.find("option").each(function(){m=jQuery(this),m.prop("disabled",!1),m.text().trim()==a&&(t=m.val())}),e.prop("disabled",!1).val(t)}function l(e,a){e.each(function(){m=jQuery(this),v=h(m),u(m,!1),v==a&&m.prop({disabled:!1,checked:!0})})}function c(e,a){a?(e.prop("disabled",!1),e.find("option").each(function(){jQuery(this).prop("disabled",!1)})):(e.prop("disabled",!0),e.find("option").each(function(a){var t=jQuery(this);t.prop("disabled",!0),t.text().trim()==S&&e.val(t.val())}))}function d(e){return e.find("option:selected").text().trim()}function u(e,a){a?e.prop("disabled",!1):e.prop({disabled:!0,checked:!1})}function p(e,a,t,r){var n=!1,i=!0;"include"==r&&(n=!0,i=!1),e.indexOf(a)>-1?u(t,n):u(t,i)}function h(e){return e[0].nextSibling.nodeValue.trim()}function f(e){return jQuery(e).closest("dd").find('input[type="checkbox"]:checked').length}if(jQuery("body").hasClass("section-ucp-register")||jQuery("body").hasClass("section-ucp-edit-profile")){if(jQuery("body").hasClass("section-ucp-register"))var g="register";else var g="ucp";var m,y,v,b,k,C,w,x,j,_,Q,S="-- Please Select --",A="Full blooded",L="Half-breed",P="Single",T="Dual",q="Archaicism",M="Idolism",I="hide-fields",O=jQuery("#pf_account_type"),D=jQuery("[id^=pf_c_]"),R=jQuery("#pf_c_race_type"),E=jQuery('input[name="pf_c_race_opts[]"]'),F=jQuery("#pf_c_race_opts_1").closest("dd"),N=jQuery("#pf_c_class_type"),B=jQuery('input[name="pf_c_class_opts[]"]'),H=jQuery("#pf_c_class_opts_1").closest("dd"),z=jQuery("#pf_c_religion_type"),W=jQuery('input[name="pf_c_religion_opts[]"]'),K=jQuery("#pf_c_religion_opts_1").closest("dd");"undefined"==typeof accType&&(accType=!1);var U=["pf_contact_discord","pf_phpbb_facebook","pf_phpbb_twitter","pf_phpbb_skype","pf_phpbb_youtube","pf_phpbb_website","pf_gender","pf_phpbb_location","pf_phpbb_interests","pf_phpbb_occupation","pf_writing_prefs","pf_character_list","pf_plotters_trackers"];if(b=d(O),"Writer"==accType||"Writer"==b||b==S)e(),a(!0);else if(a(!1),"ucp"==g){var G=jQuery("#pf_c_writer_name").val();G&&G.length&&jQuery(U).each(function(e){var a=jQuery("#"+U[e]);a&&a.length&&a.parents("dl").addClass(I)})}O.on("change",function(){e(),a(!0),b=d(O),"Character"==b&&(a(!1),c(R,!0),c(z,!0),jQuery('input[id^=pf_c_][type="text"], input[id^=pf_c_][type="number"], textarea[id^=pf_c_]').prop("disabled",!1))}),R.on("change",function(){C=d(R),u(E,!1),i(),C==A?u(E,!0):C==L&&jQuery.each(E,function(){m=jQuery(this),p(nonHalf,h(m),m)})}),t(),E.on("change",function(){t()}),N.on("change",function(){if(C=d(R),j=d(N),u(B,!1),j!=S){var e=r(C);jQuery.each(B,function(){m=jQuery(this),p(e,h(m),m)})}}),n(),B.on("change",function(){n()});var J=J||!1;z.on("change",function(){Q=d(z),u(W,!1),Q!=S&&religionRules[Q]?jQuery.each(W,function(){m=jQuery(this),p(religionRules[Q],h(m),m,"include")}):u(W,!1)}),o(),W.on("change",function(){o()}),jQuery(".page-body").on("submit","#register, #ucp.edit-profile-form",function(a){b=d(O),"Writer"==b&&(e(),s(R,A),l(E,"Human"),s(N,P),l(B,"Bard"),"ucp"==g&&s(O,"Writer"))})}}var khy={attr:{activeTab:"activetab",hidePanel:"hide-panel",showPanel:"show-panel",layouts:"map-layouts-panel",perimeters:"map-perimeters-panel",toggleId:"data-toggle-id",toggleMobile:"data-toggle-mobile",toggleName:"data-toggle-name",toggleState:"data-toggle-state",toggleType:"data-toggle-type"},selectors:{body:document.querySelector("body")},variables:{bottom:document.body.scrollHeight+window.innerHeight,fontSize:16}},dragonClasses=["Physical","Magical","Restoration"],magicClasses=["Cleric","Druid","Sorcerer","Summoner","Wizard"],all=["All"],nonHalf=["Dragon","Ghost","Korcai"],characterRules={Dragon:{exRace:all,exClass:["Alchemist","Barbarian","Bard","Cleric","Druid","Fighter","Monk","Paladin","Ranger","Rogue","Sorcerer","Summoner","Wizard"]},Dwarf:{exRace:["Elemental","Fae","Lumeacia","Ue'drahc"],exClass:mergeArray(magicClasses,dragonClasses)},Elemental:{exRace:["Dwarf","Ue'drahc"],exClass:dragonClasses},Fae:{exRace:["Dwarf","Lumeacia","Ue'drahc"],exClass:dragonClasses},Ghost:{exRace:all,exClass:dragonClasses},Human:{exRace:["Lumeacia"],exClass:dragonClasses},Kerasoka:{exRace:["Ue'drahc"],exClass:mergeArray(magicClasses,dragonClasses)},Korcai:{exRace:all,exClass:dragonClasses},Lumeacia:{exRace:["Dwarf","Fae","Human","Shapeshifter","Ue'drahc"],exClass:dragonClasses},Shapeshifter:{exRace:["Lumeacia","Ue'drahc"],exClass:dragonClasses},"Ue'drahc":{exRace:["Dwarf","Elemental","Fae","Kerasoka","Lumeacia","Shapeshifter"],exClass:dragonClasses}},religionRules={Archaicism:["Dainyil","Ixaziel","Ny'tha","Pheriss","Ristgir"],Idolism:["Ahm'kela","Cecilia","Bhelest","Esyrax","Faryv","Faunir","Iodrah","Kaxitaki","Kelorha","Lahiel","Misanyt","Nilbein","Veditova"]};addFieldsetClasses(),addForumImageClass(),addImageBackground(".page-welcome .image-wrap img",!1),addImageBackground(".postprofile .avatar img",!1),addImageBackground(".dropdown-container .user-avatar img",!1),addImageBackground(".forum-image img","1000x500"),addImageBackground(".excerpt .excerpt-image img","1000x500"),addImageBackground(".section-page-character-listing .user-avatar img",!1),addImageWrapper(".notification_list .list-inner > img"),addImageWrapper(".notification_list .notification-block > img"),addNoPaginationClass(),addQuickLinks(),addSearchIgnoredClass(),addThanksClass(),bannerCodeGenerator(".link-banners img","#link-banner-code code"),checkForEmpty("#viewprofile .user-contact .contact-icons",!1),checkForEmpty("#viewprofile .user-contact .details",!1),checkForEmpty("#viewprofile .extra-details",!1),checkForEmpty(".section-mcp-post-details .pagination ul",!0),checkForNewPM(),detectiPhone(),moveRankText(),noContentListing(),toggleElements(".bbcode-hidden-container .toggle-button",".bbcode-hidden-text","bbcode-hidden-container",!1),toggleElements(".forabg .toggle-button",".topiclist.forums","inner",!0),toggleElements(".toggle-links .toggle-button",".site-links","user-information",!1),toggleElements(".toggle-featured .toggle-button",".featured-content","wrap",!1),toggleElements(".toggleable-section .toggle-button",".card-grid","toggleable-section",!0),addFiltering(),jQuery(document).ready(function(e){checkForSpace("fieldset dl dt"),checkForSpace("dl.details dt"),addScrollableArea(e(".topicreview"),400,e(".review .right-box")),addScrollableArea(e(".mcp-main #post_details"),400,e(".mcp-main .post-buttons #expand")),addAttachmentIcon(),updateaAttachmentDisplay(".image-open"),updateaAttachmentDisplay(".attach-image img"),formatDisplayActions(),hidePMPostBox(),addCPWrapper(),toggleMemberDisplay(),toggleMapDisplay(),e("body").hasClass("simple-phpbb")||(addOnScroll("#page-header .navbar",".header-overlay","sticky"),addOnScroll(".quick-links",".site-description","quick-links-visible"),scrollOnPage(".scroll-to-top",100,0),scrollOnPage(".scroll-to-bottom",100,khy.variables.bottom)),initializeDiscordList(),initializeDropdownMenu(".menu-trigger",".menu > li"),initializeMobileMenu({menu:"#page-header .navbar .wrapper > ul",menuContainer:"#page-header .navbar .wrapper",mobileButton:".mobile-menu-button",mobileMenu:"#mobile-menu",mobileContent:".mobile-menu-content",mobileOverlay:"#mobile-overlay",width:768}),updateProfileFields()});