function checkForClasses(e){return e.className?" ":""}function isMobile(e,a){var n=window.innerWidth/e,r=document.documentElement.clientWidth/e,o=document.body.clientWidth/e;return a>=(n||r||o)}function mergeArray(e,a){for(var n=e.concat(a),r=0;r<n.length;++r)for(var o=r+1;o<n.length;++o)n[r]===n[o]&&n.splice(o--,1);return n}function addBodyClass(){if(body.getAttribute("data-class"))var e=body.getAttribute("data-class").replace(/[^a-zA-Z ]/g,"").trim().replace(/ /g,"-").replace(/-+/g,"-");e&&(body.className+=checkForClasses(body)+e)}function addForumImageClass(){var e=document.querySelectorAll(".list-inner .forum-image");if(e.length)for(var a=0;a<e.length;a++){var n=e[a].parentNode.parentNode.parentNode;n.className+=checkForClasses(n)+"has-forum-image"}}function addFieldsetClasses(){var e=document.querySelectorAll("fieldset:not(.polls) dl:not(.pmlist) dd");if(e.length)for(var a=0;a<e.length;a++)e[a].children.length>1&&(e[a].className+=checkForClasses(e[a])+"has-multiple-fields"),-1!==e[a].innerHTML.indexOf("&nbsp;")&&(e[a].className+=checkForClasses(e[a])+"has-space")}function addNoPaginationClass(){var e=document.querySelector(".action-bar .pagination");if(e){var a=e.innerText.toLowerCase(),n="page 1 of 1";if(-1!==a.indexOf(n)){var r=new RegExp(n,"gi"),o=a.replace(r,"").match(/\d+/g);o&&0>=o&&(body.className+=checkForClasses(body)+"no-pagination")}}}function noContentListing(){var e=["This board has no forums.","You do not have the required permissions to view or read topics within this forum.","There are no topics or posts in this forum.","This category has no forums.","No suitable matches were found."],a=document.querySelectorAll(".action-bar + .panel .inner");if(a.length)for(var n=0;n<a.length;n++)-1!==e.indexOf(a[n].innerText)&&(a[n].className+=checkForClasses(a[n])+"no-content")}function addSearchIgnoredClass(){var e=document.querySelectorAll(".search.post .postbody");if(e.length)for(var a=0;a<e.length;a++)-1!==e[a].innerHTML.indexOf("ignore list")&&(e[a].className+=checkForClasses(e[a])+"ignore")}function checkForNewPM(){var e=document.querySelectorAll('.cp-menu ul li a[href*="folder"]');if(e.length)for(var a=0;a<e.length;a++)-1!==e[a].innerHTML.indexOf("strong")&&(e[a].className+=checkForClasses(e[a])+"new-pm")}function addImageWrapper(e){var a=document.querySelectorAll(e);if(a.length)for(var n=0;n<a.length;n++){var r=document.createElement("div");r.setAttribute("class","image-wrap"),a[n].parentNode.insertBefore(r,a[n]),r.appendChild(a[n])}}function checkForEmpty(e){var a=document.querySelectorAll(e);if(a.length)for(var n=0;n<a.length;n++)a[n].parentNode.style.display="none"}function checkForSpace(e){jQuery(e).each(function(){var e=jQuery(this);"&nbsp;"==e.html()||"<label>&nbsp;</label>"==e.html()?e.addClass("empty-space"):e.removeClass("empty-space")})}function addScrollableArea(e,a,n){e.length&&e[0].scrollHeight>a?(e.addClass("scrollable"),e.wrapInner('<div class="scrollable-wrapper"></div>')):n.hide()}function updateaAttachmentDisplay(e){jQuery(e).on("click",function(e){var a=jQuery(this).closest(".file").parent();a.hasClass("image-expanded")?a.removeClass("image-expanded"):a.addClass("image-expanded")})}function formatDisplayActions(){jQuery(".display-actions").each(function(){var e=jQuery(this);e.html(e.html().replace(/&nbsp;/g,"").replace(/::/g,"&bull;"));var a=e.find(" div a");-1!==a.text().toLowerCase().indexOf("mark")&&a.parent("div").addClass("mark-actions");var n=e.children("select");n.each(function(){jQuery(this).next(".button1, .button2").addBack().wrapAll('<div class="select-actions"></div>')}),e.wrapInner('<div class="display-actions-wrapper"></div>')})}function addOnScroll(e,a,n){var a=jQuery(a).offset().top,r=jQuery(window),o=!1;r.scroll(function(){0==o?r.scrollTop()>a&&(jQuery(e).addClass(n),o=!0):r.scrollTop()<=a&&(jQuery(e).removeClass(n),o=!1)})}function scrollOnPage(e,a,n){addOnScroll(e,".site-description","scroll-to-visible"),jQuery(e).on("click",function(){return jQuery("html, body").animate({scrollTop:n},1e3),!1})}function toggleMobileContent(e,a){jQuery(e).off().on("click",function(){jQuery(a).hasClass("toggle-show")?jQuery(a).removeClass("toggle-show"):jQuery(a).addClass("toggle-show")})}function debounce(e,a,n){var r;return function(){var o=this,t=arguments,i=function(){r=null,n||e.apply(o,t)},s=n&&!r;clearTimeout(r),r=setTimeout(i,a),s&&e.apply(o,t)}}function initializeMobileMenu(e){function a(){i.hasClass("show")?(i.removeClass("show"),jQuery("body, html").removeClass("mobile-open")):(i.addClass("show"),jQuery("body, html").addClass("mobile-open"))}function n(){var n=isMobile(baseFontSize,s/baseFontSize);if(n){if(!c){jQuery(".mobile-menu-header .fa-times").off().on("click",function(){a()}),r.detach().appendTo(i),r.children(".dropdown-container").each(function(){jQuery('<i class="icon fa-chevron-right slide-submenu"></i>').appendTo(this)});var t=jQuery(e.mobileMenu+" > ul > li");t.find(" .slide-submenu").off().on("click",function(){var e=jQuery(this).parent();e.hasClass("dropdown-open")?(t.removeClass("dropdown-close"),e.removeClass("dropdown-open")):(t.addClass("dropdown-close"),e.removeClass("dropdown-close").addClass("dropdown-open"))}),c=!0}}else c&&(r.detach().appendTo(o),jQuery(".slide-submenu").remove(),jQuery("li").removeClass("dropdown-close").removeClass("dropdown-open"),jQuery("body, html").removeClass("mobile-open"),i.removeClass("show"),c=!1)}var r=jQuery(e.menu),o=jQuery(e.menuContainer),t=jQuery(e.mobileButton),i=jQuery(e.mobileMenu),s=e.width,c=!1;t.off().on("click",function(){a()}),n();var l=debounce(function(){n()},100);window.addEventListener("resize",l)}function updateProfileFields(){function e(e,a,n){jQuery(e).text(function(){return jQuery(e).text().replace('"field"',a).replace('"x"',n)})}function a(e,a,n,r){B.find("option").each(function(){v=jQuery(this),C=v.text().trim(),C==e?v.text(function(){return v.text().replace(C,a)}):C==n&&v.text(function(){return v.text().replace(C,r)})})}function n(){H.each(function(){v=jQuery(this),v.is("select")?u(v,!1):v.is('input[type="checkbox"]')?h(v,!1):v.val("").prop("disabled",!0)})}function r(e){e?(jQuery(".error-msg-chracter").addClass("hide-fields"),H.closest("dl").addClass("hide-fields")):(jQuery(".error-msg-chracter").removeClass("hide-fields"),H.closest("dl").removeClass("hide-fields"))}function o(){_=p(P),b=O.find('input[type="checkbox"]:checked'),Q=g("#pf_c_race_opts_1"),_==T||_==R?I.each(function(){if(v=jQuery(this),_==R&&1==Q){x=m(b);var e=mergeArray(characterRules[x].exRace,nonHalf);e&&f(e,m(v),v),s()}else _==T&&1==Q||_==R&&2==Q?(v.is(":checked")||h(v,!1),u(E,!0)):(_==T?h(v,!0):_==R&&f(nonHalf,m(v),v),s())}):(h(I,!1),u(E,!1))}function t(e){var a=[];return I.each(function(){if(v=jQuery(this),C=m(v),v.is(":checked")){var n=characterRules[C].exClass;n&&(a=e==R&&"Dwarf"==C?dragonClasses:mergeArray(a,n))}}),a}function i(){_=p(P),k=p(E);var e=t(_);b=z.find('input[type="checkbox"]:checked'),w=g("#pf_c_class_opts_1"),k==D||k==M?W.each(function(){v=jQuery(this),k==D&&1==w||k==M&&2==w?v.is(":checked")||h(v,!1):k!=A&&f(e,m(v),v)}):h(W,!1)}function s(){u(E,!1),h(W,!1)}function c(){F=p(q),b=K.find('input[type="checkbox"]:checked'),S=g("#pf_c_religion_opts_1"),F==N||F==L?U.each(function(){v=jQuery(this),S>3?v.is(":checked")||h(v,!1):F!=A&&religionRules[F]?f(religionRules[F],m(v),v,"include"):h(v,!1)}):h(U,!1)}function l(e,a){var n;e.find("option").each(function(){v=jQuery(this),v.prop("disabled",!1),v.text().trim()==a&&(n=v.val())}),e.prop("disabled",!1).val(n)}function d(e,a){e.each(function(){v=jQuery(this),C=m(v),h(v,!1),C==a&&v.prop({disabled:!1,checked:!0})})}function u(e,a){a?(e.prop("disabled",!1),e.find("option").each(function(){jQuery(this).prop("disabled",!1)})):(e.prop("disabled",!0),e.find("option").each(function(a){var n=jQuery(this);n.prop("disabled",!0),n.text().trim()==A&&e.val(n.val())}))}function p(e){return e.find("option:selected").text().trim()}function h(e,a){a?e.prop("disabled",!1):e.prop({disabled:!0,checked:!1})}function f(e,a,n,r){var o=!1,t=!0;"include"==r&&(o=!0,t=!1),e.indexOf(a)>-1?h(n,o):h(n,t)}function m(e){return e[0].nextSibling.nodeValue.trim()}function g(e){return jQuery(e).closest("dd").find('input[type="checkbox"]:checked').length}function y(e,a){for(var n=0;n<a.length;n++){v=a[n];var r="group-"+v.replace(/ /g,"-").toLowerCase();jQuery('<div class="group '+r+'"><span class="group-header">'+v+"</span></div>").appendTo(e)}}if(jQuery("body").hasClass("section-ucp-register")){var v,b,C,j,Q,_,x,w,k,S,F,A="-- Please Select --",T="Full Blooded",R="Half-Breed",D="Single",M="Dual",N="Archaicism",L="Idolism",B=jQuery("#pf_account_type"),H=jQuery("[id^=pf_c_]"),P=jQuery("#pf_c_race_type"),I=jQuery('input[name="pf_c_race_opts[]"]'),O=jQuery("#pf_c_race_opts_1").closest("dd"),E=jQuery("#pf_c_class_type"),W=jQuery('input[name="pf_c_class_opts[]"]'),z=jQuery("#pf_c_class_opts_1").closest("dd"),q=jQuery("#pf_c_religion_type"),U=jQuery('input[name="pf_c_religion_opts[]"]'),K=jQuery("#pf_c_religion_opts_1").closest("dd");Q=g("#pf_c_race_opts_1"),w=g("#pf_c_class_opts_1"),S=g("#pf_c_religion_opts_1");var G="“Race”",V="“Class”",Y="“Religion”",Z=jQuery(".error-msg-too-few");Z&&(Z[0]&&(1>Q?e(Z[0],G,"1"):1>w&&e(Z[0],V,"1")),Z[1]&&1>w&&e(Z[1],V,"1"));var J=jQuery(".error-msg-too-many");J&&(J[0]&&(Q>2?e(J[0],G,"2"):w>2?e(J[0],V,"2"):S>4&&e(J[0],Y,"4")),J[1]&&(w>2?e(J[0],V,"2"):S>4&&e(J[0],Y,"4")),J[2]&&S>4&&e(J[0],Y,"4")),a("10","Writer","9","Character"),j=p(B),"Writer"==j||"10"==j||j==A?(n(),r(!0)):r(!1),B.on("change",function(){n(),r(!0),j=p(B),"Character"!=j&&"9"!=j||(r(!1),u(P,!0),u(q,!0),jQuery('input[id^=pf_c_][type="text"]').prop("disabled",!1),jQuery("textarea[id^=pf_c_]").prop("disabled",!1))}),P.on("change",function(){_=p(P),h(I,!1),s(),_==T?h(I,!0):_==R&&jQuery.each(I,function(){v=jQuery(this),f(nonHalf,m(v),v)})});var X=["Beast","Changeling","Elf","Human","Mystic","Terra","Undead"];y(O,X),I.each(function(){v=jQuery(this),parent=v.parent(),C=m(v),"Dragon"==C||"Ue'drahc"==C?parent.appendTo(".group-beast"):"Shapeshifter"==C?parent.appendTo(".group-changeling"):"Lumeacia"==C||"Kerasoka"==C?parent.appendTo(".group-elf"):"Elemental"==C||"Fae"==C?parent.appendTo(".group-mystic"):"Dwarf"==C?parent.appendTo(".group-terra"):"Ghost"==C||"Korcai"==C?parent.appendTo(".group-undead"):parent.appendTo(".group-human")}),o(),I.on("change",function(){o()}),E.on("change",function(){if(_=p(P),k=p(E),h(W,!1),k!=A){var e=t(_);jQuery.each(W,function(){v=jQuery(this),f(e,m(v),v)})}});var $=["Combat","Supportive","Magic","Dragon"];y(z,$),W.each(function(){v=jQuery(this),parent=v.parent(),C=m(v),"Alchemist"==C||"Bard"==C||"Cleric"==C?parent.appendTo(".group-supportive"):"Druid"==C||"Sorcerer"==C||"Summoner"==C||"Wizard"==C?parent.appendTo(".group-magic"):"Physical"==C||"Magical"==C||"Healing"==C?parent.appendTo(".group-dragon"):parent.appendTo(".group-combat")}),i(),W.on("change",function(){i()}),q.on("change",function(){F=p(q),h(U,!1),F!=A&&religionRules[F]?jQuery.each(U,function(){v=jQuery(this),f(religionRules[F],m(v),v,"include")}):h(v,!1)});var ee=["Archaicism","Idolism"];y(K,ee),U.each(function(){v=jQuery(this),parent=v.parent(),C=m(v),"Cecilia"==C||"Bhelest"==C?parent.appendTo(".group-idolism"):parent.appendTo(".group-archaicism")}),c(),U.on("change",function(){c()}),jQuery("#register").on("submit",function(e){j=p(B),"Writer"!=j&&"10"!=j||(n(),l(P,T),d(I,"Human"),l(E,D),d(W,"Bard"))})}}var body=document.querySelector("body"),baseFontSize=16,dragonClasses=["Physical","Magical","Healing"],magicClasses=["Cleric","Druid","Sorcerer","Summoner","Wizard"],all=["All"],nonHalf=["Dragon","Ghost","Korcai"],characterRules={Dragon:{exRace:all,exClass:["Alchemist","Barbarian","Bard","Cleric","Druid","Fighter","Monk","Paladin","Ranger","Rogue","Sorcerer","Summoner","Wizard"]},Dwarf:{exRace:["Elemental","Fae","Lumeacia","Ue'drahc"],exClass:mergeArray(magicClasses,dragonClasses)},Elemental:{exRace:["Dwarf","Ue'drahc"],exClass:dragonClasses},Fae:{exRace:["Dwarf","Lumeacia","Ue'drahc"],exClass:dragonClasses},Ghost:{exRace:all,exClass:dragonClasses},Human:{exRace:["Lumeacia"],exClass:dragonClasses},Kerasoka:{exRace:["Ue'drahc"],exClass:mergeArray(magicClasses,dragonClasses)},Korcai:{exRace:all,exClass:dragonClasses},Lumeacia:{exRace:["Dwarf","Fae","Human","Shapeshifter","Ue'drahc"],exClass:dragonClasses},Shapeshifter:{exRace:["Lumeacia","Ue'drahc"],exClass:dragonClasses},"Ue'drahc":{exRace:["Dwarf","Elemental","Fae","Kerasoka","Lumeacia","Shapeshifter"],exClass:dragonClasses}},religionRules={Archaicism:["Dainyil","Ixaziel","Ny'tha","Pheriss","Ristgir"],Idolism:["Cecilia","Bhelest"]};addBodyClass(),addForumImageClass(),addFieldsetClasses(),addNoPaginationClass(),noContentListing(),addSearchIgnoredClass(),checkForNewPM(),addImageWrapper(".notification_list .list-inner > img"),addImageWrapper(".notification_list .notification-block > img"),checkForEmpty(".section-mcp-post-details .pagination ul"),checkForEmpty(".section-mcp-post-details .postbody .content pre");var bottomDistance=jQuery(document).height()+jQuery(window).height();jQuery(document).ready(function(e){checkForSpace("fieldset dl dt"),checkForSpace("dl.details dt"),addScrollableArea(e(".topicreview"),400,e(".review .right-box")),addScrollableArea(e(".mcp-main #post_details"),400,e(".mcp-main .post-buttons #expand"));var a=".attach-image";e(a).each(function(){e(this).prepend('<span class="image-open" onclick="viewableArea(this);"><i class="icon icon-xl fa-search-plus fa-fw" aria-hidden="true"></i></span>')}),updateaAttachmentDisplay(".image-open"),updateaAttachmentDisplay(a+" img"),formatDisplayActions();var n=e("#pmheader-postingbox");0==e(n).find("fieldset.fields1").children().length&&e(n).hide();var r=e(".cp-menu"),o=e(".cp-main");(r||o)&&(r.parent().addClass("cp-wrapper"),o.parent().addClass("cp-wrapper")),e("body").hasClass("simple-phpbb")||(addOnScroll("#page-header .navbar",".header-overlay","sticky"),scrollOnPage(".scroll-to-top",100,0),scrollOnPage(".scroll-to-bottom",100,bottomDistance)),toggleMobileContent(".toggle-links a","#page-welcome .site-callouts .site-links"),toggleMobileContent(".toggle-featured a","#featured-content"),initializeMobileMenu({menu:"#page-header .navbar > ul",menuContainer:"#page-header .navbar",mobileButton:".mobile-menu-button",mobileMenu:"#mobile-menu",width:768}),updateProfileFields()});